apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: dev

resources:
- ../../base
- secrets.yaml

nameSuffix: ""

labels:
- pairs:
    environment: dev

configMapGenerator:
- name: app-config
  literals:
  - APP_ENV=development
  - LOG_LEVEL=trace
  - DATABASE_HOST=postgres-dev.svc.cluster.local

# Os secrets devem ser gerenciados externamente
# Veja secrets.yaml.example para um modelo

patches:
- patch: |-
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: nginx-demo
    spec:
      replicas: 1
  target:
    kind: Deployment
    name: nginx-demo
